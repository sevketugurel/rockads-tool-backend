{
  "info": {
    "name": "Video Localization API",
    "description": "Complete API for video upload, transcription, and localization using Gemini AI",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "video_id",
      "value": "1",
      "type": "string"
    },
    {
      "key": "job_id",
      "value": "1",
      "type": "string"
    },
    {
      "key": "translation_id",
      "value": "1",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health & Status",
      "item": [
        {
          "name": "API Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "Check if the main API is running"
          }
        },
        {
          "name": "Localization Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/health",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "health"]
            },
            "description": "Check if the localization service is running"
          }
        }
      ]
    },
    {
      "name": "Video Management",
      "item": [
        {
          "name": "Upload Video",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "Select a video file to upload"
                },
                {
                  "key": "description",
                  "value": "Test advertisement video for localization",
                  "type": "text",
                  "description": "Optional description for the video"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/videos/upload",
              "host": ["{{base_url}}"],
              "path": ["api", "videos", "upload"]
            },
            "description": "Upload a video file for processing. Supports MP4, AVI, MOV, MKV, WMV formats. Maximum size: 500MB."
          }
        },
        {
          "name": "Get All Videos",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/videos/",
              "host": ["{{base_url}}"],
              "path": ["api", "videos", ""]
            },
            "description": "Retrieve all uploaded videos"
          }
        },
        {
          "name": "Get Video by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/videos/{{video_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "videos", "{{video_id}}"]
            },
            "description": "Get a specific video by ID. Update the video_id variable with the actual video ID."
          }
        },
        {
          "name": "Delete Video",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/videos/{{video_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "videos", "{{video_id}}"]
            },
            "description": "Delete a video and all associated data. Update the video_id variable with the actual video ID."
          }
        }
      ]
    },
    {
      "name": "Transcription",
      "item": [
        {
          "name": "Transcribe Video",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"language_hint\": \"en\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/videos/{{video_id}}/transcribe",
              "host": ["{{base_url}}"],
              "path": ["api", "videos", "{{video_id}}", "transcribe"]
            },
            "description": "Start transcription process for a video. Language hint is optional (en, es, tr, de, fr, etc.)"
          }
        },
        {
          "name": "Get Video Transcription",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/videos/{{video_id}}/transcription",
              "host": ["{{base_url}}"],
              "path": ["api", "videos", "{{video_id}}", "transcription"]
            },
            "description": "Get the transcription for a video. Update the video_id variable with the actual video ID."
          }
        },
        {
          "name": "Get Video Processing Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/videos/{{video_id}}/status",
              "host": ["{{base_url}}"],
              "path": ["api", "videos", "{{video_id}}", "status"]
            },
            "description": "Get the current processing status of a video including transcription progress."
          }
        }
      ]
    },
    {
      "name": "Localization Setup",
      "item": [
        {
          "name": "Get Available Countries",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/countries?group_by_language=false",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "countries"],
              "query": [
                {
                  "key": "group_by_language",
                  "value": "false",
                  "description": "Whether to group countries by language"
                }
              ]
            },
            "description": "Get list of available countries for localization with cultural context information"
          }
        },
        {
          "name": "Get Countries Grouped by Language",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/countries?group_by_language=true",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "countries"],
              "query": [
                {
                  "key": "group_by_language",
                  "value": "true",
                  "description": "Group countries by language"
                }
              ]
            },
            "description": "Get countries organized by language (e.g., US English, UK English, Australian English)"
          }
        },
        {
          "name": "Get Language Groups",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/languages",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "languages"]
            },
            "description": "Get countries grouped by language for UI selection"
          }
        }
      ]
    },
    {
      "name": "Localization Jobs",
      "item": [
        {
          "name": "Create Localization Job",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"video_id\": {{video_id}},\n  \"target_countries\": [\"US\", \"GB\", \"AU\"],\n  \"user_id\": null,\n  \"preferences\": {\n    \"analysis_depth\": \"comprehensive\",\n    \"cultural_sensitivity\": \"high\",\n    \"brand_consistency\": \"strict\",\n    \"preserve_brand_elements\": true,\n    \"adapt_for_culture\": true,\n    \"maintain_video_timing\": true\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/localization/jobs",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "jobs"]
            },
            "description": "Create a new localization job for multiple target countries"
          }
        },
        {
          "name": "Start Localization Job",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/jobs/{{job_id}}/start",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "jobs", "{{job_id}}", "start"]
            },
            "description": "Start processing a localization job in background. Update the job_id variable with the actual job ID."
          }
        },
        {
          "name": "Get Localization Job Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/jobs/{{job_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "jobs", "{{job_id}}"]
            },
            "description": "Get detailed status and progress of a localization job. Update the job_id variable with the actual job ID."
          }
        },
        {
          "name": "Get Job Translations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/jobs/{{job_id}}/translations",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "jobs", "{{job_id}}", "translations"]
            },
            "description": "Get all translations for a specific localization job. Update the job_id variable with the actual job ID."
          }
        },
        {
          "name": "Cancel Localization Job",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/jobs/{{job_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "jobs", "{{job_id}}"]
            },
            "description": "Cancel a running localization job. Update the job_id variable with the actual job ID."
          }
        }
      ]
    },
    {
      "name": "Translations",
      "item": [
        {
          "name": "Get Translation Result",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/translations/{{translation_id}}?include_analysis=false",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "translations", "{{translation_id}}"],
              "query": [
                {
                  "key": "include_analysis",
                  "value": "false",
                  "description": "Include detailed video and cultural analysis"
                }
              ]
            },
            "description": "Get a specific translation result. Update the translation_id variable with the actual translation ID."
          }
        },
        {
          "name": "Get Translation with Analysis",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/translations/{{translation_id}}?include_analysis=true",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "translations", "{{translation_id}}"],
              "query": [
                {
                  "key": "include_analysis",
                  "value": "true",
                  "description": "Include detailed video and cultural analysis"
                }
              ]
            },
            "description": "Get translation result with detailed cultural and video analysis"
          }
        },
        {
          "name": "Retry Failed Translation",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/translations/{{translation_id}}/retry",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "translations", "{{translation_id}}", "retry"]
            },
            "description": "Retry a failed translation. Update the translation_id variable with the actual translation ID."
          }
        }
      ]
    },
    {
      "name": "Video Localizations",
      "item": [
        {
          "name": "Get Video Localizations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/videos/{{video_id}}/localizations",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "videos", "{{video_id}}", "localizations"]
            },
            "description": "Get all localization results for a specific video. Update the video_id variable with the actual video ID."
          }
        }
      ]
    },
    {
      "name": "Analytics",
      "item": [
        {
          "name": "Get Localization Analytics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/analytics/summary",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "analytics", "summary"]
            },
            "description": "Get summary analytics for all localization jobs"
          }
        },
        {
          "name": "Get Analytics by Video",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/analytics/summary?video_id={{video_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "analytics", "summary"],
              "query": [
                {
                  "key": "video_id",
                  "value": "{{video_id}}",
                  "description": "Filter by specific video ID"
                }
              ]
            },
            "description": "Get analytics filtered by specific video"
          }
        },
        {
          "name": "Get Analytics by Country",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/analytics/summary?country_code=US",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "analytics", "summary"],
              "query": [
                {
                  "key": "country_code",
                  "value": "US",
                  "description": "Filter by country code"
                }
              ]
            },
            "description": "Get analytics filtered by specific country"
          }
        },
        {
          "name": "Get Analytics by Date Range",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/analytics/summary?date_from=2025-01-01T00:00:00Z&date_to=2025-12-31T23:59:59Z",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "analytics", "summary"],
              "query": [
                {
                  "key": "date_from",
                  "value": "2024-01-01T00:00:00Z",
                  "description": "Filter from date (ISO format)"
                },
                {
                  "key": "date_to",
                  "value": "2024-12-31T23:59:59Z",
                  "description": "Filter to date (ISO format)"
                }
              ]
            },
            "description": "Get analytics for a specific date range"
          }
        }
      ]
    },
    {
      "name": "Direct Localization",
      "item": [
        {
          "name": "Direct Localize Video",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"video_id\": {{video_id}},\n  \"country_code\": \"US\",\n  \"music_only_background\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/localization/direct",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "direct"]
            },
            "description": "Directly localize a video for a specific country without job orchestration. This is a faster, single-shot localization that preserves advertising intent and cultural context."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Direct Localization 200', function () { pm.response.to.have.status(200); });",
                  "const r = pm.response.json();",
                  "console.log('final_video_url:', r.final_video_url);",
                  "pm.expect(r).to.have.any.keys('final_video_url','parts');"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Cultural Analysis",
      "item": [
        {
          "name": "Analyze Ad Cultural Fit (Gemini + RAG)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"video_id\": {{video_id}},\n  \"country_codes\": [\"US\", \"DE\", \"TR\", \"JP\"]\n}",
              "options": { "raw": { "language": "json" } }
            },
            "url": {
              "raw": "{{base_url}}/api/localization/analysis",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "analysis"]
            },
            "description": "Run cultural analysis for selected countries using Gemini with a lightweight RAG layer. Returns strengths, risks, adaptations, CTA examples, compliance, KPIs, plus percentage scores (cultural_fit, content_suitability, market_potential) and target audience analysis."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Cultural Analysis 200', function () { pm.response.to.have.status(200); });",
                  "const r = pm.response.json();",
                  "pm.expect(r).to.have.property('results');",
                  "pm.expect(Array.isArray(r.results)).to.be.true;",
                  "if (r.results.length) { pm.expect(r.results[0]).to.have.property('country_code'); }"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "🔄 Complete Test Workflow",
      "item": [
        {
          "name": "1️⃣ Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "✅ First step: Verify API is running"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API Health Check', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "2️⃣ Upload Video",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "Select a video file to upload (MP4, AVI, MOV, MKV, WMV)"
                },
                {
                  "key": "description",
                  "value": "Test video for localization workflow",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/videos/upload",
              "host": ["{{base_url}}"],
              "path": ["api", "videos", "upload"]
            },
            "description": "📹 Second step: Upload a video and save the video_id for next steps"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Video Upload Success', function () {",
                  "    pm.response.to.have.status(201);",
                  "    const responseJson = pm.response.json();",
                  "    pm.globals.set('video_id', responseJson.video.id);",
                  "    console.log('Video ID set to:', responseJson.video.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "3️⃣ Get Available Countries",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/countries?group_by_language=true",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "countries"],
              "query": [
                {
                  "key": "group_by_language",
                  "value": "true"
                }
              ]
            },
            "description": "🌍 Third step: See available countries for localization"
          }
        },
        {
          "name": "4️⃣ Direct Localization (Quick)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"video_id\": {{video_id}},\n  \"country_code\": \"US\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/localization/direct",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "direct"]
            },
            "description": "⚡ Fourth step: Quick direct localization (Alternative to job-based workflow)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Direct Localization Success', function () {",
                  "    pm.response.to.have.status(200);",
                  "    const responseJson = pm.response.json();",
                  "    pm.globals.set('translation_id', responseJson.translation_id);",
                  "    console.log('Translation completed for country:', responseJson.target_country);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "5️⃣ Create Localization Job (Advanced)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"video_id\": {{video_id}},\n  \"target_countries\": [\"US\", \"GB\", \"AU\", \"DE\", \"FR\"],\n  \"user_id\": null,\n  \"preferences\": {\n    \"analysis_depth\": \"comprehensive\",\n    \"cultural_sensitivity\": \"high\",\n    \"brand_consistency\": \"strict\",\n    \"preserve_brand_elements\": true,\n    \"adapt_for_culture\": true,\n    \"maintain_video_timing\": true\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/localization/jobs",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "jobs"]
            },
            "description": "🏗️ Fifth step: Create advanced multi-country localization job"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Localization Job Created', function () {",
                  "    pm.response.to.have.status(201);",
                  "    const responseJson = pm.response.json();",
                  "    pm.globals.set('job_id', responseJson.job_id);",
                  "    console.log('Job ID set to:', responseJson.job_id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "6️⃣ Start Localization Job",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/jobs/{{job_id}}/start",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "jobs", "{{job_id}}", "start"]
            },
            "description": "🚀 Sixth step: Start the localization job processing"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Job Started', function () {",
                  "    pm.response.to.have.status(200);",
                  "    console.log('Localization job started successfully');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "7️⃣ Check Job Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/jobs/{{job_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "jobs", "{{job_id}}"]
            },
            "description": "📊 Seventh step: Monitor job progress (run multiple times)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Job Status Retrieved', function () {",
                  "    pm.response.to.have.status(200);",
                  "    const responseJson = pm.response.json();",
                  "    console.log('Job Status:', responseJson.status);",
                  "    console.log('Progress:', responseJson.progress_percentage + '%');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "8️⃣ Get Job Translations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/localization/jobs/{{job_id}}/translations",
              "host": ["{{base_url}}"],
              "path": ["api", "localization", "jobs", "{{job_id}}", "translations"]
            },
            "description": "📋 Eighth step: Get all completed translations for the job"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Translations Retrieved', function () {",
                  "    pm.response.to.have.status(200);",
                  "    const responseJson = pm.response.json();",
                  "    console.log('Number of translations:', responseJson.translations.length);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    }
  ]
}
